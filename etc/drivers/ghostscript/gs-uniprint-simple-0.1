driver "gs-uniprint-simple" {
   
	help "This driver gives you the ability to\ntoggle between many preselected configurations
		\nfor the following printers
		\n\tAny Epson Stylus Color"

	requires "gs"

	verify_exec {
		(gs -h |grep -q uniprint) || 
		(echo "Ghostscript driver uniprint is required"; exit 1)
	}

	option {
		desc = "printer selection"
		var = OPTION_1

		choice "mode1" {
			value = "@bjc610a0.upp"
			desc = "Canon BJC 610, 360x360DpI, plain paper high speed, color, rendered"
			help = ""
		}
		choice "mode2" {
			value = "@bjc610a1.upp"
			desc = "Canon BJC 610, 360x360DpI, plain paper, color, rendered"
			help = ""
		}
		choice "mode3" {
			value = "@bjc610a2.upp"
			desc = "Canon BJC 610, 360x360DpI, coated paper, color, rendered"
			help = ""
		}
		choice "mode4" {
			value = "@bjc610a3.upp"
			desc = "Canon BJC 610, 360x360DpI, transparency film, color, rendered"
			help = ""
		}
		choice "mode5" {
			value = "@bjc610a4.upp"
			desc = "Canon BJC 610, 360x360DpI, back print film, color, rendered"
			help = ""
		}
		choice "mode6" {
			value = "@bjc610a5.upp"
			desc = "Canon BJC 610, 360x360DpI, fabric sheet, color, rendered"
			help = ""
		}
		choice "mode7" {
			value = "@bjc610a6.upp"
			desc = "Canon BJC 610, 360x360DpI, glossy paper, color, rendered"
			help = ""
		}
		choice "mode8" {
			value = "@bjc610a7.upp"
			desc = "Canon BJC 610, 360x360DpI, high gloss film, color, rendered"
			help = ""
		}
		choice "mode9" {
			value = "@bjc610a8.upp"
			desc = "Canon BJC 610, 360x360DpI, high resolution paper, color, rendered"
			help = ""
		}
		choice "mode10" {
			value = "@bjc610b1.upp"
			desc = "Canon BJC 610, 720x720DpI, plain paper, color, rendered"
			help = ""
		}
		choice "mode11" {
			value = "@bjc610b2.upp"
			desc = "Canon BJC 610, 720x720DpI, coated paper, color, rendered"
			help = ""
		}
		choice "mode12" {
			value = "@bjc610b3.upp"
			desc = "Canon BJC 610, 720x720DpI, transparency film, color, rendered"
			help = ""
		}
		choice "mode13" {
			value = "@bjc610b4.upp"
			desc = "Canon BJC 610, 720x720DpI, back print film, color, rendered"
			help = ""
		}
		choice "mode14" {
			value = "@bjc610b6.upp"
			desc = "Canon BJC 610, 720x720DpI, glossy paper, color, rendered"
			help = ""
		}
		choice "mode15" {
			value = "@bjc610b7.upp"
			desc = "Canon BJC 610, 720x720DpI, high gloss paper, color, rendered"
			help = ""
		}
		choice "mode16" {
			value = "@bjc610b8.upp"
			desc = "Canon BJC 610, 720x720DpI, high resolution paper, color, rendered"
			help = ""
		}
		choice "mode17" {
			value = "@cdj550.upp"
			desc = "HP Deskjet 550c, 300x300DpI, Gamma=2"
			help = ""
		}
		choice "mode18" {
			value = "@necp2x.upp"
			desc = "NEC Prinwriter 2X, 360x360DpI, Plain Paper"
			help = ""
		}
		choice "mode19" {
			value = "@necp2x6.upp"
			desc = "NEC Prinwriter 2X, 360x360DpI, Plain Paper"
			help = ""
		}
		choice "mode20" {
			value = "@ras1.upp"
			desc = "SUN rasterfile, 1 Bit, 2 Colors (Ghostscript-Rendering)"
			help = ""
		}
		choice "mode21" {
			value = "@ras24.upp"
			desc = "SUN rasterfile, 24 Bit, 7 Colors (RGB-Error-Diffusion)"
			help = ""
		}
		choice "mode22" {
			value = "@ras3.upp"
			desc = "SUN rasterfile, 3 Bit, 7 Colors (RGB-Ghostscript)"
			help = ""
		}
		choice "mode23" {
			value = "@ras32.upp"
			desc = "SUN rasterfile, 32 Bit, 6+1 Colors (CMYK-Error-Diffusion)"
			help = ""
		}
		choice "mode24" {
			value = "@ras4.upp"
			desc = "SUN rasterfile, 4 Bit, 6+1 Colors (CMYK-Ghostscript)"
			help = ""
		}
		choice "mode25" {
			value = "@ras8m.upp"
			desc = "SUN rasterfile, 8 Bit, 2 Colors (Error-Diffusion)"
			help = ""
		}
		choice "mode26" {
			value = "@stc.upp"
			desc = "Epson Stylus Color I (and PRO Series), 360x360DpI, Plain Paper"
			help = ""
		}
		choice "mode27" {
			value = "@stc1520h.upp"
			desc = "Epson Stylus Color 1520, 1440x720DpI, Inkjet Paper"
			help = ""
		}
		choice "mode28" {
			value = "@stc2.upp"
			desc = "Epson Stylus Color II / IIs, 360x360DpI, Plain Paper"
			help = ""
		}
		choice "mode29" {
			value = "@stc2_h.upp"
			desc = "Epson Stylus Color II, 720x720DpI, Special Paper"
			help = ""
		}
		choice "mode30" {
			value = "@stc2s_h.upp"
			desc = "Epson Stylus Color IIs, 720x720DpI, Special Paper"
			help = ""
		}
		choice "mode31" {
			value = "@stc500p.upp"
			desc = "Epson Stylus Color 500, 360x360DpI, not Weaved, Plain Paper"
			help = ""
		}
		choice "mode32" {
			value = "@stc500ph.upp"
			desc = "Epson Stylus Color 500, 720x720DpI, not Weaved, Plain Paper"
			help = ""
		}
		choice "mode33" {
			value = "@stc600ih.upp"
			desc = "Epson Stylus Color 600, 1440x720DpI, Inkjet Paper"
			help = ""
		}
		choice "mode34" {
			value = "@stc600p.upp"
			desc = "Epson Stylus Color 600, 720x720DpI, Plain Paper"
			help = ""
		}
		choice "mode35" {
			value = "@stc600pl.upp"
			desc = "Epson Stylus Color 600, 360x360DpI, Plain Paper"
			help = ""
		}
		choice "mode36" {
			value = "@stc800ih.upp"
			desc = "Epson Stylus Color 800, 1440x720DpI, Inkjet Paper"
			help = ""
		}
		choice "mode37" {
			value = "@stc800p.upp"
			desc = "Epson Stylus Color 800, 720x720DpI, Plain Paper"
			help = ""
		}
		choice "mode38" {
			value = "@stc800pl.upp"
			desc = "Epson Stylus Color 800, 360x360DpI, Plain Paper"
			help = ""
		}
		choice "mode39" {
			value = "@stc_h.upp"
			desc = "Epson Stylus Color I (and PRO Series), 720x720DpI, Special Paper"
			help = ""
		}
		choice "mode40" {
			value = "@stc_l.upp"
			desc = "Epson Stylus Color I (and PRO Series), 360x360DpI, noWeave"
			help = ""
		}
		choice "mode41" {
			value = "@stcany.upp"
			desc = "Any Epson Stylus Color, 360x360DpI"
			help = ""
		}
	}



	option {
		var = FIX_STAIRCASE;
		desc = "staircase text correction"
		choice scyes {
			value = "YES"
			desc = "fix staircased text problems"
			help = "Fixes printouts\n\t\tthat look\n\t\t\t\tlike this!"
		}
		choice scno {
			value = "NO"
			desc = "leave text alone"
		}
	}

	argument {
		var = "paper"
		desc = "paper size"
		help = "Set papersize to letter, legal, a3, a4, etc..."
		def_value = "letter"
	}			


	language_driver postscript {}    # Nothing to do...

	language_driver text {
		convert_exec = {
		     if [ "$FIX_STAIRCASE" = "YES" ]; then
			sed 's/$//' $INPUT > $OUTPUT;
		     else
			ln -s $INPUT $OUTPUT;
		     fi
		     touch $OUTPUT.ok;  # Tell filter_exec not to invoke gs
		}
	}

	filter_exec {
		if ! test -e $INPUT.ok; then
         		gs \
             			-q -dBATCH -dSAFER -dNOPAUSE \
				-sDEVICE=uniprint \
	     			-sOutputFile=$OUTPUT \
				-sPaperSize=$paper \
				$OPTION_1 \
				$INPUT
	     		if ! test -e $OUTPUT; then 
	        		echo "ABORTED: Ghostscript had no output." >> $STATUS
				exit 1
             		fi
             	else
			ln -s $INPUT $OUTPUT;
             	fi
	}

}
